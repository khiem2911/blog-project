{% extends 'home.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/blogList.css' %}" />
{% endblock %}

{% block body_block %}
  <div class="container">
    <div class="post-list">
      {% for post in posts %}
        {% if post.is_public %}
          <div class="post">
            <h3>{{ post.title }}</h3>
            <p class="author">Người đăng: {{ post.author }}</p>
            <p class="created-at">Ngày tạo: {{ post.created_at }}</p>
            <p>{{ post.content }}</p>
            <img src="media/{{ post.imagespost }}" alt="" />
            <br />
            <h4>Bình luận:</h4>
            <div class="comments-container">
              {% for comment in post.comments.all %}
                {% if forloop.counter <= 3 %}
                  <p class="comment">{{ comment.author.username }}: {{ comment.content }}</p>
                {% else %}
                  <p class="comment hide-comments">{{ comment.author.username }}: {{ comment.content }}</p>
                {% endif %}
              {% endfor %}
            </div>
            {% if post.comments.count > 3 %}
              <a href="#" onclick="showMoreComments(event)">Xem thêm bình luận</a>
            {% endif %}

            <form method="post" class="comment-form">
              {% csrf_token %}
              <input type="hidden" name="post_id" value="{{ post.id }}" />
              <label for="{{ form.content.id_for_label }}">Nội dung bình luận:</label>
              {{ form.content }}
              <button type="submit">Đăng bình luận</button>
            </form>
            <p>_______________________________________________________________________________________________</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endblock %}
